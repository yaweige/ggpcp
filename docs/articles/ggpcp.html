<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to ggpcp • ggpcp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to ggpcp">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggpcp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ggpcp.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to ggpcp</h1>
            
      
      
      <div class="hidden name"><code>ggpcp.Rmd</code></div>

    </div>

    
    
<p>This document shows you how to make use of <code>ggpcp</code> functionalities with ggplot2 to draw an ideal parallel coordinate plot with numeric, categorical vairables or both. It provides a set of tools to deal with various cases and provides a good solution to draw factor variables.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggpcp)</a></code></pre></div>
<div id="work-flow" class="section level2">
<h2 class="hasAnchor">
<a href="#work-flow" class="anchor"></a>Work flow</h2>
<p>To use ggpcp package functionalities, we generally need to do the following steps:</p>
<ol style="list-style-type: decimal">
<li><p>Choose the columns you want to use to draw the plot with gather_pcp().</p></li>
<li><p>Pass the outcome to the transform_pcp() to do the transformation.</p></li>
<li><p>Pass the transformed data to ggplot functions and ggpcp layer functions to draw the plot.</p></li>
</ol>
</div>
<div id="transform-the-data-from-a-wide-form-to-a-long-form-with-gather_pcp" class="section level2">
<h2 class="hasAnchor">
<a href="#transform-the-data-from-a-wide-form-to-a-long-form-with-gather_pcp" class="anchor"></a>Transform the data from a wide form to a long form with gather_pcp()</h2>
<p>gather_pcp() allows you to transform the orginal data to the required form of ggpcp. It chooses the selected columns and transform those columns from a wide form to a long form while keeping all the original variables in the data set. The returned data frame has five columns for directly use of ggpcp, which will be passed to geom_pcp() later:</p>
<ul>
<li>id: identify the observations.</li>
<li>name: the original variable names.</li>
<li>value: the values for the corresponding varibles indicated by <strong>name</strong> <code>name</code> <em>name</em>.</li>
<li>level: for factor variables, this indicates the level of the factor variable. For numeric variables, it’s the numeric value of that variable which is the same the value column.</li>
<li>class: the class for the variable indicated in name, usually “numeric” and “factor”.</li>
</ul>
<p>The original data are duplicated and kept for ease of future use when you want to map a variable to an aesthetics like color or size etc. An example is:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"mtcars"</span>)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(mtcars)</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt;                    mpg cyl disp  hp drat    wt  qsec vs am gear carb</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt; Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt; Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt; Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</span></a>
<a class="sourceLine" id="cb2-10" title="10"></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co"># make the output as tibble to be consistent</span></a>
<a class="sourceLine" id="cb2-12" title="12">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>()</a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt;   id name value level   class  mpg cyl disp  hp drat    wt  qsec vs am</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt; 1  1  mpg    21  21.0 numeric 21.0   6  160 110 3.90 2.620 16.46  0  1</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt; 2  2  mpg    21  21.0 numeric 21.0   6  160 110 3.90 2.875 17.02  0  1</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt; 3  3  mpg  22.8  22.8 numeric 22.8   4  108  93 3.85 2.320 18.61  1  1</span></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="co">#&gt; 4  4  mpg  21.4  21.4 numeric 21.4   6  258 110 3.08 3.215 19.44  1  0</span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co">#&gt; 5  5  mpg  18.7  18.7 numeric 18.7   8  360 175 3.15 3.440 17.02  0  0</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="co">#&gt; 6  6  mpg  18.1  18.1 numeric 18.1   6  225 105 2.76 3.460 20.22  1  0</span></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="co">#&gt;   gear carb</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="co">#&gt; 1    4    4</span></a>
<a class="sourceLine" id="cb2-22" title="22"><span class="co">#&gt; 2    4    4</span></a>
<a class="sourceLine" id="cb2-23" title="23"><span class="co">#&gt; 3    4    1</span></a>
<a class="sourceLine" id="cb2-24" title="24"><span class="co">#&gt; 4    3    1</span></a>
<a class="sourceLine" id="cb2-25" title="25"><span class="co">#&gt; 5    3    2</span></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="co">#&gt; 6    3    1</span></a></code></pre></div>
<p>The gather_pcp() has its first argument as data, in which case you can use a pipe operator as in other tidyverse packages. The second argument <code>...</code> accept many ways of selection of vatiables:</p>
<ul>
<li>positions: 1:3, c(1, 3, 2)</li>
<li>names: mpg, cyl</li>
<li>selectors: starts_with(“m”)</li>
<li>other expressions: mpg:cyl, sample(1:3, size = 3)</li>
</ul>
<p>The following code does the exact same selection as the previous one.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(mpg, <span class="dv">2</span>, disp<span class="op">:</span>hp)</a></code></pre></div>
</div>
<div id="scaling-the-data-with-transform_pcp" class="section level2">
<h2 class="hasAnchor">
<a href="#scaling-the-data-with-transform_pcp" class="anchor"></a>Scaling the data with transform_pcp()</h2>
<p>In most cases, you will need to scale your data in a proper way to best show them in a parallel coordinate plot. And if you have factor variables in your data, they will be shown in the range of 0-1, so you will need to scale the numeric variables to that range before drawing the plot.</p>
<p>We provides four approaches to implement scaling by transform_pcp():</p>
<ul>
<li>“std”: univariately, subtract mean and divide by standard deviation</li>
<li>“robust”: univariately, subtract median and divide by median absolute deviation</li>
<li>“uniminmax”: univariately, scale so the minimum of the variable is zero, and the maximum is one</li>
<li>“globalminmax”: gobal scaling, the global maximum is mapped to one, global minimum across the variables is mapped to zero</li>
</ul>
<p>To continue the work flow:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/transform_pcp.html">transform_pcp</a></span>(<span class="dt">method =</span> <span class="st">"uniminmax"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>()</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt; # A tibble: 6 x 16</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; # Groups:   name [1]</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt;      id name  value level class     mpg   cyl  disp    hp  drat    wt  qsec</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; 1     1 mpg   0.451  21   numeric  21       6   160   110  3.9   2.62  16.5</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; 2     2 mpg   0.451  21   numeric  21       6   160   110  3.9   2.88  17.0</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; 3     3 mpg   0.528  22.8 numeric  22.8     4   108    93  3.85  2.32  18.6</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; 4     4 mpg   0.468  21.4 numeric  21.4     6   258   110  3.08  3.22  19.4</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 5     5 mpg   0.353  18.7 numeric  18.7     8   360   175  3.15  3.44  17.0</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt; 6     6 mpg   0.328  18.1 numeric  18.1     6   225   105  2.76  3.46  20.2</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; # … with 4 more variables: vs &lt;dbl&gt;, am &lt;dbl&gt;, gear &lt;dbl&gt;, carb &lt;dbl&gt;</span></a></code></pre></div>
</div>
<div id="draw-lines-with-geom_pcp" class="section level2">
<h2 class="hasAnchor">
<a href="#draw-lines-with-geom_pcp" class="anchor"></a>Draw lines with geom_pcp()</h2>
<p>After all the preparation steps above, you can pass the output data to ggplot2 and make use of the function geom_pcp() to draw the basic coordinate parallel coordinate plot, which is composed by lines and axes.</p>
<p>There are five aesthetics required for the layer functions of ggpcp. They provide necessary information to draw the plot and know the levels for factor variables. (note: id is not actually useful as we assume the id is from 1 to nrow now, which is the exact outcome following the steps above. I think we can remove it later.)</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw"><a href="../reference/transform_pcp.html">transform_pcp</a></span>(<span class="dt">method =</span> <span class="st">"uniminmax"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class))</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>We can see from the plot above, the second variable is actually a categorical one. So we can treat it as a factor variable to get a better plot, which evenly spreads the observations for the factor variable and provides the ability to track each observation. And add some color according to that.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">cyl =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(cyl)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span><span class="kw"><a href="../reference/transform_pcp.html">transform_pcp</a></span>(<span class="dt">method =</span> <span class="st">"uniminmax"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> cyl))</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>This is an extremely powerful functionality when it is used to deal with a sequence of factor variables. (When there is no numeric variable, we don’t need to scale anything with transform_pcp().)</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">vs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(cyl),</a>
<a class="sourceLine" id="cb7-3" title="3">         <span class="dt">am =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(am),</a>
<a class="sourceLine" id="cb7-4" title="4">         <span class="dt">gear =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(gear),</a>
<a class="sourceLine" id="cb7-5" title="5">         <span class="dt">carb =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(carb)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(vs<span class="op">:</span>carb) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> vs))</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div id="draw-boxes-with-geom_pcp_box" class="section level2">
<h2 class="hasAnchor">
<a href="#draw-boxes-with-geom_pcp_box" class="anchor"></a>Draw boxes with geom_pcp_box()</h2>
<p>To show the levels of factor variables clearer, you can use geom_pcp_box(), which is used to draw boxes for the levels. We can see from the following example.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">vs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(cyl),</a>
<a class="sourceLine" id="cb8-3" title="3">         <span class="dt">am =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(am),</a>
<a class="sourceLine" id="cb8-4" title="4">         <span class="dt">gear =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(gear),</a>
<a class="sourceLine" id="cb8-5" title="5">         <span class="dt">carb =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(carb)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(vs<span class="op">:</span>carb) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> vs)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp_box.html">geom_pcp_box</a></span>()</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>If you want to see the boxes not black segments, you need to provide another argument: boxwidth to, unfortunately, both layer functions.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">vs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(cyl),</a>
<a class="sourceLine" id="cb9-3" title="3">         <span class="dt">am =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(am),</a>
<a class="sourceLine" id="cb9-4" title="4">         <span class="dt">gear =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(gear),</a>
<a class="sourceLine" id="cb9-5" title="5">         <span class="dt">carb =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(carb)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(vs<span class="op">:</span>carb) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> vs), <span class="dt">boxwidth =</span> <span class="fl">0.2</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp_box.html">geom_pcp_box</a></span>(<span class="dt">boxwidth =</span> <span class="fl">0.2</span>)</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
<div id="draw-bands-with-geom_pcp_band" class="section level2">
<h2 class="hasAnchor">
<a href="#draw-bands-with-geom_pcp_band" class="anchor"></a>Draw bands with geom_pcp_band()</h2>
<p>You can also draw bands with geom_pcp_band(). This can adds a layer to lines or boxes to compose a more meaningful plot.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">vs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(cyl),</a>
<a class="sourceLine" id="cb10-3" title="3">         <span class="dt">am =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(am),</a>
<a class="sourceLine" id="cb10-4" title="4">         <span class="dt">gear =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(gear),</a>
<a class="sourceLine" id="cb10-5" title="5">         <span class="dt">carb =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(carb)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(vs<span class="op">:</span>carb) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> vs), <span class="dt">boxwidth =</span> <span class="fl">0.2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp_box.html">geom_pcp_box</a></span>(<span class="dt">boxwidth =</span> <span class="fl">0.2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp_band.html">geom_pcp_band</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">fill =</span> vs), <span class="dt">boxwidth =</span> <span class="fl">0.2</span>, <span class="dt">alpha =</span> <span class="fl">0.2</span>)</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Sometimes smaller bands are merged to a larger band, which is meaningful in showing a tidy plot, but will make it more difficult to color the bands. So we provide an argument to control this behavior. When you turn on the <code>merge</code>, the color/fill aesthetics is not reliable because <code>geom_pcp_band</code> will use the first observation in the merged band to color the whole band.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">vs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(cyl),</a>
<a class="sourceLine" id="cb11-3" title="3">         <span class="dt">am =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(am),</a>
<a class="sourceLine" id="cb11-4" title="4">         <span class="dt">gear =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(gear),</a>
<a class="sourceLine" id="cb11-5" title="5">         <span class="dt">carb =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(carb)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(vs<span class="op">:</span>carb) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> vs), <span class="dt">boxwidth =</span> <span class="fl">0.2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp_box.html">geom_pcp_box</a></span>(<span class="dt">boxwidth =</span> <span class="fl">0.2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp_band.html">geom_pcp_band</a></span>(<span class="dt">boxwidth =</span> <span class="fl">0.2</span>, <span class="dt">fill =</span> <span class="st">"blue"</span>, <span class="dt">alpha =</span> <span class="fl">0.2</span>, <span class="dt">merge =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div id="adjust-boxwidth-rugwidth-and-interwidth" class="section level2">
<h2 class="hasAnchor">
<a href="#adjust-boxwidth-rugwidth-and-interwidth" class="anchor"></a>Adjust boxwidth, rugwidth and interwidth</h2>
<p>ggpcp also provides a way to modify the parallel coordinate plot according to your need:</p>
<ul>
<li>boxwidth: adjust the width of boxes (for factor variable)</li>
<li>rugwidth: adjust the width of rugs (for numeric variable)</li>
<li>interwidth: adjust the distance between every two adjacent variables</li>
</ul>
<p>These arguments accept a scalar or a vector with equal length of the object they control.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">vs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(cyl),</a>
<a class="sourceLine" id="cb12-3" title="3">         <span class="dt">am =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(am),</a>
<a class="sourceLine" id="cb12-4" title="4">         <span class="dt">gear =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(gear),</a>
<a class="sourceLine" id="cb12-5" title="5">         <span class="dt">carb =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(carb)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(mpg, vs<span class="op">:</span>carb) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="st">  </span><span class="kw"><a href="../reference/transform_pcp.html">transform_pcp</a></span>(<span class="dt">method =</span> <span class="st">"uniminmax"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> vs), <span class="dt">boxwidth =</span> <span class="fl">0.2</span>, <span class="dt">rugwidth =</span> <span class="fl">0.2</span>,  <span class="dt">interwidth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">2</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp_box.html">geom_pcp_box</a></span>(<span class="dt">boxwidth =</span> <span class="fl">0.2</span>, <span class="dt">rugwidth =</span> <span class="fl">0.2</span>, <span class="dt">interwidth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">2</span>))</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<div id="break-the-factor-block" class="section level2">
<h2 class="hasAnchor">
<a href="#break-the-factor-block" class="anchor"></a>Break the factor block</h2>
<p>Our default method works great for a sequence of factor variables, but as the number variables increases, it becomes messier at the right side of the factor block, because the number of combinations of levels of variables increases. This is a conceptual problem which makes it hard to show the pattern of the data in these cases.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">vs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(cyl),</a>
<a class="sourceLine" id="cb13-3" title="3">         <span class="dt">am =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(am),</a>
<a class="sourceLine" id="cb13-4" title="4">         <span class="dt">gear =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(gear)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(vs<span class="op">:</span>gear) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> vs), <span class="dt">boxwidth =</span> <span class="fl">0.5</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp_box.html">geom_pcp_box</a></span>(<span class="dt">boxwidth =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>We provide a argument to partly sovle this problem. By making use of <code>breakpoint</code> in geom_pcp(), we can actually break a factor block to two or more smaller parts, which will better show the relations between the adjacent variables while keep tracking of individual observations.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">vs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(cyl),</a>
<a class="sourceLine" id="cb14-3" title="3">         <span class="dt">am =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(am),</a>
<a class="sourceLine" id="cb14-4" title="4">         <span class="dt">gear =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(gear)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="st">  </span><span class="kw"><a href="../reference/gather_pcp.html">gather_pcp</a></span>(vs<span class="op">:</span>gear) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">id =</span> id, <span class="dt">name =</span> name, <span class="dt">value =</span> value, <span class="dt">level =</span> level, <span class="dt">class =</span> class)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp.html">geom_pcp</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> vs), <span class="dt">boxwidth =</span> <span class="fl">0.5</span>, <span class="dt">breakpoint =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="st">  </span><span class="kw"><a href="../reference/geom_pcp_box.html">geom_pcp_box</a></span>(<span class="dt">boxwidth =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="ggpcp_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#work-flow">Work flow</a></li>
      <li><a href="#transform-the-data-from-a-wide-form-to-a-long-form-with-gather_pcp">Transform the data from a wide form to a long form with gather_pcp()</a></li>
      <li><a href="#scaling-the-data-with-transform_pcp">Scaling the data with transform_pcp()</a></li>
      <li><a href="#draw-lines-with-geom_pcp">Draw lines with geom_pcp()</a></li>
      <li><a href="#draw-boxes-with-geom_pcp_box">Draw boxes with geom_pcp_box()</a></li>
      <li><a href="#draw-bands-with-geom_pcp_band">Draw bands with geom_pcp_band()</a></li>
      <li><a href="#adjust-boxwidth-rugwidth-and-interwidth">Adjust boxwidth, rugwidth and interwidth</a></li>
      <li><a href="#break-the-factor-block">Break the factor block</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Yawei Ge.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
